# File managed by Puppet

[main]
  vardir = <%= scope.lookupvar('puppet::data_dir') %>
  logdir = <%= scope.lookupvar('puppet::log_dir') %>
  rundir = <%= scope.lookupvar('puppet::run_dir') %>
  ssldir = <%= scope.lookupvar('puppet::ssl_dir') %>
  usecacheonfailure = true
  user = <%= scope.lookupvar('puppet::process_user') %>
  group = <%= scope.lookupvar('puppet::process_group') %>
  configtimeout = <%= scope.lookupvar('puppet::configtimeout') %>
  masterport = <%= scope.lookupvar('puppet::port') %>

<% if scope.lookupvar('puppet::http_proxy_host') != '' -%>
  http_proxy_host = "<%= scope.lookupvar('puppet::http_proxy_host') -%>"
<% end -%>

<% if scope.lookupvar('puppet::http_proxy_port') != '' -%>
  http_proxy_port = "<%= scope.lookupvar('puppet::http_proxy_port') -%>"
<% end -%>

<% if scope.lookupvar('puppet::prerun_command') != '' -%>
  prerun_command = "<%= scope.lookupvar('puppet::prerun_command') -%>"
<% end -%>
<% if scope.lookupvar('puppet::postrun_command') != '' -%>
  postrun_command = "<%= scope.lookupvar('puppet::postrun_command') -%>"
<% end -%>

<% if scope.lookupvar('puppet::params::major_version') == "0.2" -%>[puppetd]<% else -%>[agent]<% end %>
  certname = <%= scope.lookupvar('puppet::certname') %>
  server = <%= scope.lookupvar('puppet::server') %>
  environment = <%= scope.lookupvar('puppet::environment') %>
  pluginsync = true
  report = true
  reportserver = <%= scope.lookupvar('puppet::server') %>
  summarize = true
  graph = true
  listen = <%= scope.lookupvar('puppet::bool_listen') %>
  runinterval = <%= scope.lookupvar('puppet::runinterval') %>
  localconfig = $vardir/localconfig
